---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# EMtree

> EMtree infers interaction networks from abundance data. It uses averages over spanning trees within a Poisson log-Normal Model ([PLNmodels](https://github.com/jchiquet/PLNmodels>)), and involves plotting funcitonalities (using `ggraph` and `tydigraph`).

## Installation

You can install the development version of EMtree with:

``` r
devtools::install_github("Rmomal/EMtree")
```

## Example with Fatala river fishes

This is a basic example which shows you how to infer a network, using Barans95 data from the `ade4` package.

### Data


```{r fish_data , message=FALSE}
library(ade4)
library(tidyverse)
data(baran95)
counts = as.matrix(baran95$fau)
covar = as_tibble(baran95$plan)

n = nrow(counts)
p = ncol(counts)
```
```{r}
head(counts)
head(covar)
```

### Fit PLN model
 This creates a `PLNmodels` object
```{r}
library(PLNmodels)
model<-PLN(counts ~ covar$site)
```

### Run EMtree function

```{r,eval=FALSE}
outputs<-EMtree(model,  maxIter = 10)
```

### Graphics

